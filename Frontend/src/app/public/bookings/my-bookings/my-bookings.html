<div class="my-bookings-page">

  <!-- Header -->
  <div class="page-header">
    <h3>My Bookings</h3>
    <p class="subtitle">View and track your booking requests</p>
    <button class="btn-back" (click)="goBack()">‚Üê Back to Home</button>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    Loading your bookings...
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !bookings.length" class="empty-state">
    <p>You haven't made any bookings yet.</p>
    <button class="btn-primary" (click)="goBack()">Browse Flats</button>
  </div>

  <!-- Booking List -->
  <div *ngIf="!loading && bookings.length" class="booking-list">
    <div *ngFor="let booking of bookings" class="booking-item">
      
      <div class="booking-info">
        <span class="booking-id">#{{ booking.id }}</span>
        <span class="booking-flat">Flat {{ booking.flat_no || booking.flat_id }}</span>
        <span class="booking-tower">{{ booking.tower_name || 'Unknown Tower' }}</span>
        <span class="booking-date">
          {{ booking.booking_date ? (booking.booking_date | date:'mediumDate') : 'Date not available' }}
        </span>
        <span class="booking-status" [ngClass]="getStatusClass(booking.status)">
          {{ booking.status || 'Unknown' }}
        </span>
      </div>

      <!-- Action buttons for declined bookings -->
      <div *ngIf="booking.status === 'declined'" class="booking-actions">
        <p class="declined-message">Your booking request was declined. You can try booking this flat again.</p>
        <button class="btn-rebook" (click)="rebookFlat(booking.flat_id)">Book Again</button>
      </div>

      <!-- Message for approved bookings -->
      <div *ngIf="booking.status === 'approved'" class="booking-actions">
        <p class="approved-message">Congratulations! Your booking has been approved.</p>
        <button class="btn-view" (click)="viewFlat(booking.flat_id)">View Flat Details</button>
      </div>

    </div>
  </div>

</div>
